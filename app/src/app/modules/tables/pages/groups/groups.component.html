<div class="bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-[calc(100vh-21rem)] md:h-[calc(100vh-19rem)]">
  
  <div class="p-5 border-b border-slate-100 bg-white flex items-center shrink-0 z-20 relative rounded-t-xl">
    <app-search-header 
      class="w-full"
      actionButtonLabel="Nuevo Grupo"
      (search)="applyFilter($event)"
      (add)="openGroupDialog()">
    </app-search-header>
  </div>

  <div class="flex-1 overflow-hidden p-4 bg-white rounded-b-xl">
    
    <div class="h-full overflow-auto rounded-lg border border-slate-100 bg-slate-50 relative">
      
      @if (dataSource.filteredData.length > 0) {
        <table mat-table [dataSource]="dataSource" matSort class="w-full min-w-150">
          
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="w-24 pl-6"> Código </th>
            <td mat-cell *matCellDef="let group" class="pl-6 font-medium text-slate-600"> {{group.id}} </td>
          </ng-container>
    
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre </th>
            <td mat-cell *matCellDef="let group" class="text-slate-700 font-semibold"> {{group.name}} </td>
          </ng-container>
    
          <ng-container matColumnDef="createdBy">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Creado por </th>
            <td mat-cell *matCellDef="let group"> 
              <span class="bg-slate-100 text-slate-600 px-2 py-1 rounded text-xs font-bold border border-slate-200">
                {{group.createdBy}}
              </span>
            </td>
          </ng-container>
    
          <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="pr-6"> Fecha Creación </th>
            <td mat-cell *matCellDef="let group" class="pr-6 text-slate-500"> {{group.createdAt}} </td>
          </ng-container>
    
          <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-slate-50 h-12 sticky top-0 z-10"></tr>
          
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
              class="h-14 hover:bg-slate-100/50 transition-colors border-b border-slate-100 last:border-0 bg-white">
          </tr>
    
        </table>
      }

      @if (dataSource.filteredData.length === 0 && dataSource.data.length > 0) {
        <div class="h-full flex items-center justify-center bg-white">
          <app-no-result-data [query]="currentFilterValue"></app-no-result-data>
        </div>
      }

      @if (dataSource.data.length === 0) {
         <div class="h-full flex items-center justify-center bg-white p-10 text-slate-500 flex-col gap-2">
            <mat-icon class="text-slate-300 scale-150 mb-2">folder_off</mat-icon>
            <p>No hay grupos creados todavía.</p>
         </div>
      }

    </div>
  </div>
</div>